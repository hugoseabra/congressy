{% load form_config_tags %}

<!-- FORM -->
<form action="{% url 'public:hotsite' event.slug %}" method="post"
      class="form"
      role="form" onsubmit="submit_form()">

    {% csrf_token %}

    {% if user.is_authenticated %}
        <h4 class="form-heading"
            style="font-weight: bold;">Olá, {{ user.first_name }}</h4>
    {% else %}
        <h4 class="form-heading"
            style="font-weight: bold;">Inscreva-se
            agora!</h4>
    {% endif %}

    {% block messages %}
        {% if messages %}
            <div style="width:100%;margin-top:3px;padding-bottom:10px">
            {% for message in messages %}

                {% if message.tags %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible"
                         role="alert">

                {% else %}
                    <div class="alert alert-warning alert-dismissible"
                         role="alert">
                {% endif %}

            <button type="button" class="close" data-dismiss="alert"
                    aria-label="Close"><span aria-hidden="true">&times;</span>
            </button>
            {{ message|capfirst }}
            </div>

            {% endfor %}
        </div>
        {% endif %}
    {% endblock messages %}

    <div class="form-validation alert"></div>

    <div class="panel panel-primary">
        <div class="panel-heading">
            <div class="panel-title">Escolha o tipo de Ingresso</div>
        </div>

        <div class="panel-body">
            <div class="row">
                <div class="col-md-12">
                    {% if lots %}
                        <select class="form-control" name="lot" id="id_lot">
                            {% for lot in lots %}
                                <option value="{{ lot.pk }}">{{ lot.display_publicly }}</option>
                            {% endfor %}
                        </select>
                        <div class="text-muted small">Escolha o tipo de ingresso.</div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="panel panel-primary">
        <div class="panel-heading">
            <div class="panel-title">Dados pessoais</div>
        </div>
        <div class="panel-body">
            {% if is_subscribed %}
                <div class="text-center">
                    <p style="font-size: 18px">
                        Informe os dados abaixo para finalizar a sua inscrição.
                    </p>

                    <div style="align-items: center;display: flex;justify-content: center;">
                        <i class="fa fa-check-circle fa-5x" style="color: darkgreen"
                           aria-hidden="true"></i>

                    </div>
                </div>
            {% else %}
                <div class="row">
                    <div class="col-md-9">
                        {% render_generic_field form.name autofocus=True %}
                    </div>
                    <div class="col-md-3">
                        {% render_generic_field form.gender %}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        {% render_generic_field form.birth_date %}
                    </div>
                    <div class="col-md-9">
                        {% render_generic_field form.email required=True %}
                    </div>
                </div>
                <div class="row">
                </div>
                <div class="row">
                    <div class="col-md-4">
                        {% render_generic_field form.phone %}
                    </div>
                    <div class="col-md-8">
                        {% render_generic_field form.city %}
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
    <div class="panel panel-primary">
        <div class="panel-heading">
            <div class="panel-title">Endereço</div>
        </div>

        <div class="panel-body">
            <div class="row">
                <div class="col-md-3">
                    {% render_generic_field form.zip_code %}
                </div>
            </div>
            <div class="row">
                <div class="col-md-9">
                    {% render_generic_field form.street %}
                </div>
                <div class="col-md-3">
                    {% render_generic_field form.number %}
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    {% render_generic_field form.complement %}
                </div>
                <div class="col-md-6">
                    {% render_generic_field form.village %}
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="id_city_search">
                            <label for="id_city_search">Cidade:</label>

                        </label>
                        <div id="remote">
                            <input name="id_city_search" class="typeahead form-control " id="id_city_search" type="text"
                                   data-provide="typeahead">
                            <input name="id_city"  id="id_city" type="hidden">
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <div class="panel panel-primary">
        <div class="panel-heading">
            <div class="panel-title">Pagamento</div>
        </div>
        <div class="panel-body">
            <button id="id_button_pay" type="button">Pagar.me</button>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="form-group form-group-submit">
                <button class="btn btn-primary btn-lg btn-block"
                        data-loading-text="Quero me inscrever">
                    Enviar
                </button>
            </div>
        </div>
    </div>
    </div>

</form>