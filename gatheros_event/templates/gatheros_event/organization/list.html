{% extends "gatheros_front/base.html" %}
{% load i18n static %}
{% load organization_tags %}

{% block title %}Gatheros - Eventos{% endblock %}

{% block content %}
    <h1>Minhas Organizações</h1>
    <div style="margin-bottom:10px; padding: 10px;background-color: #DDDDDD;text-align: center;">
        <a href="{% url 'gatheros_event:organization-add' %}">Adicionar</a>
    </div>

    <div style="background: #DDD">
        {% if object_list %}
            <table width="100%">
                <tr>
                    <td style="border:1px solid #fff;padding:10px;margin-bottom: 3px">Nome</td>
                    <td style="border:1px solid #fff;padding:10px;margin-bottom: 3px">Grupo</td>
                    <td style="border:1px solid #fff;padding:10px;margin-bottom: 3px"></td>
                </tr>
                {% for item in object_list %}
                    {% get_member_group item user as member_group %}
                    <tr>
                        <td style="background: #FFF;padding:10px;margin-bottom: 3px">
                            <div>
                                {{ forloop.counter }} -
                                <a href="{% url 'gatheros_event:organization-panel' item.pk %}">{{ item.name }}</a>
                            </div>
                            {% if item.description_html %}
                            <hr/>
                            <div style="text-indent: 10px;">
                                {{ item.description_html|safe }}
                            </div>
                            {% endif %}
                        </td>
                        <td style="background: #FFF;padding:10px;margin-bottom: 3px">
                            {% get_member_group_name item user %}
                        </td>
                        <td width="8%" style="background: #FFF;padding:10px;margin-bottom: 3px">
                            {% if member_group == member.ADMIN %}
                            <a href="{% url 'gatheros_event:organization-edit' item.pk %}">Editar</a>
                            &nbsp; &nbsp; &nbsp;
                                {% if item.is_deletable and user has 'gatheros_event.delete_organization' of item %}
                                    <a href="{% url 'gatheros_event:organization-delete' item.pk %}">Excluir</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </table>
        {% else %}
            <div style="background: #FFF;padding:10px;margin-bottom: 3px">
                Nenhuma organização
            </div>
        {% endif %}
    </div>

{% endblock %}
