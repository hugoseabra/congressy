/**
 * @module
 * @name Congressy Abstracts - DOM
 * @namespace window.cgsy.abstracts.dom
 * @description Módulo de features relacionados a manipulação de DOM.
 * @depends:
 *  - jQuery
 */
window.cgsy=window.cgsy||{},window.cgsy.abstracts=window.cgsy.abstracts||{},function(e){"use strict";e.dom={},e.dom.DOMManager=function(){var e=this;this.domElements={};var t=!1;this.setAsStrictKeys=function(){t=!0},this.setAsNotStrictKeys=function(){t=!1},this.setElement=function(t,n){return!n instanceof jQuery?(console.error('Element "'+t+'" não é um instância de jQuery.'),void 0):n.length===0?(console.warn("Nenhum elemento DOM encontrado para "+t),console.log(n),void 0):(e.domElements[t]=n,void 0)},this.getEl=function(n){if(!this.domElements.hasOwnProperty(n)){if(t===!0){var o='Key "'+n+'" was not defined';console.error(o),alert(o)}return null}var i=e.domElements[n];return i&&i.length!==0?i:void 0},this.insertValue=function(e,t,n){n=n===!0,t=t&&t instanceof Array?t:[t],t=t.map(function(e){return e?typeof e=="string"?e:e+"":""});var o=this.getEl(e);if(o&&o.length!==0){var i=["INPUT","TEXTAREA","SELECT"],r=o.get(0).tagName;if(!i.includes(r))return n?o.html(t):o.text(t),void 0;var s=["radio","checkbox"],c=o.attr("type");if(s.includes(c)){var a=function(e){var n=t.includes(e.val());c==="checkbox"?(n&&!e.prop("checked")||!n&&e.prop("checked"))&&e.trigger("click"):c==="radio"&&(e.iCheck!==void 0?n?e.iCheck("check"):e.iCheck("uncheck"):e.prop("checked",n))};return o.length>1?($.each(o,function(){var e=$(this);a(e)}),void 0):(a(o),void 0)}o.val(t)}}},e.dom.Component=function(){var t=this;this.dom_manager=new e.dom.DOMManager,this.strict=function(){t.dom_manager.setAsStrictKeys()},this.setEl=function(e,n){t.dom_manager.domElements[e]=$(n)},this.getEl=function(e){return t.dom_manager.getEl(e)},this.insertValue=function(e,n,o){t.dom_manager.insertValue(e,n,o)},this.render=function(){console.warn("<component>.render() not implemented.")}}}(window.cgsy.abstracts);/**
 * @module
 * @name Congressy Abstracts - Error
 * @namespace window.cgsy.abstracts.error
 * @description Módulo que gerencia como os erros serão tretados.
 */
window.cgsy=window.cgsy||{},window.cgsy.abstracts=window.cgsy.abstracts||{},function(r){"use strict";r.error={},r.error.Error=function(){var r=this;this.key_errors={},this.non_key_errors=[],this.reset=function(){this.key_errors={},this.non_key_errors=[]},this.setNonKeyError=function(s){r.non_key_errors.includes(s)||(r.non_key_errors.push(s),console.warn(s))},this.setKeyError=function(s,o){r.key_errors.hasOwnProperty(s)||(r.key_errors[s]=[]),r.key_errors[s].includes(o)||(r.key_errors[s].push(o),console.warn(s,o))}}}(window.cgsy.abstracts);/**
 * @module
 * @name Congressy Abstracts - Messenger
 * @namespace window.cgsy.abstracts.messenger
 * @description Módulo que gerencia notificações por mensagens de pop-up.
 * @depends
 *  - window.cgsy.messenger
 */
window.cgsy=window.cgsy||{},window.cgsy.abstracts=window.cgsy.abstracts||{},function(n,i,t){"use strict";i.messenger={},i.messenger.Messenger=function(n){var i=this,s=null;this.id=n,this.notify=function(n,o){s=t.triggerEvent(n,o,i.id)},this.notifySuccess=function(n){i.notify("success",n)},this.notifyWarning=function(n){i.notify("warning",n)},this.notifyInfo=function(n){i.notify("info",n)},this.notifyError=function(n){i.notify("error",n)},this.close=function(){s&&s.hide()},this.closeAll=function(){t.closeAll()},this.notifyLoader=function(){s=t.triggerLoader("aguarde...",i.id)},this.retry=function(n,i){t.retry(s,n,i)}}}(jQuery,window.cgsy.abstracts,window.cgsy.messenger);/**
 * @module
 * @name Congressy Abstracts - URI
 * @namespace window.cgsy.abstracts.uri
 * @description Módulo que gerencia como os erros serão tratados.
 */
window.cgsy=window.cgsy||{},window.cgsy.abstracts=window.cgsy.abstracts||{},function(t){"use strict";t.uri={},t.uri.APIBaseUrl=function(t,n){var r=!0;this.auth_token=null,this.isProdMode=function(){return r===!1},this.setProdMode=function(){r=!1},this.getProdBaseUrl=function(){return t},this.getDevBaseUrl=function(){return n},this.getBaseUrl=function(){return r===!0?n:t}},t.uri.URIManager=function(n,r){!n instanceof t.uri.APIBaseUrl&&console.error('URI not an instance of "abstracts.uri.APIBaseUrl".'),r||console.error("base_project_url not provided."),this.setAuthToken=function(t){n.auth_token=t},this.getAuthToken=function(){return n.auth_token},this.isProdMode=function(){return n.isProdMode()},this.setProdMode=function(){n.setProdMode()},this.getUri=function(t){var n=e();return n+="/"+s(r),n+="/"+s(t)};var e=function(){var t=n.getBaseUrl();return t.substr(-1)==="/"&&(t=t.substr(0,t.length-1)),t},s=function(t){return t&&t.charAt(0)==="/"&&(t=t.substr(1,t.length)),t}}}(window.cgsy.abstracts);/**
 * @module
 * @name Congressy Abstracts - Alerter
 * @namespace window.cgsy.abstracts.alerter
 * @description Módulo que gerencia notificações por alerta.
 * @depends
 *  - jQuery
 *  - window.cgsy.abstracts.error
 */
window.cgsy=window.cgsy||{},window.cgsy.abstracts=window.cgsy.abstracts||{},function(r,e){"use strict";e.alerter={},e.alerter.Alerter=function(e){var t=this;e=r(e);var n=null,a=null;this.replace_existing=!1,this.replaceExisting=function(){t.replace_existing=!0},this.clear=function(){n&&n.empty(),a=null},this.render=function(r,e){return a===null?(s().append(t.createAlertEl(r,e)),void 0):(t.createAlertEl(r,e),t.replace_existing===!1&&s().append(a),void 0)},this.renderSuccess=function(r){t.render("success",r)},this.renderWarning=function(r){t.render("warning",r)},this.renderInfo=function(r){t.render("info",r)},this.renderError=function(r){t.render("error",r)},this.renderDanger=t.renderError,this.createAlertEl=function(e,n){var s=a!==null,i=t.replace_existing===!1||s===!1;switch(i?a=r("<div>").css("margin-bottom","3px").addClass("alert alert-dismissible").attr("role","alert"):a.removeClass("alert-warning alert-success alert-info alert-danger"),e){case"warning":a.addClass("alert-warning");break;case"success":a.addClass("alert-success");break;case"info":a.addClass("alert-info");break;case"danger":case"error":default:a.addClass("alert-danger")}return i&&(a.append(r("<button>").attr({"class":"close","data-dismiss":"alert","aria-label":"Close"}).html(r("<span>").attr("aria-hidden","true").html("&times;"))),a.append(r("<span>").addClass("alert-content"))),a.find(".alert-content").html(n),a};var s=function(){return n||(n=e.find(".main-alerter"),n.length===0&&(n=r("<div>").addClass("main-alerter"),e.prepend(n))),n}},e.alerter.ErrorAlerter=function(t,n){var a=this;t=r(t),this.alerter=new e.alerter.Alerter(t),this.clear=function(){a.alerter.clear()},this.notify=function(){a.clear();var e,t=[],s="error",i=Object.keys(n.key_errors).length;n.non_key_errors.forEach(function(r){e="<div>"+r+"</div>",i&&(e+='<hr class="hr" />'),t.push(e)});var l=1;r.each(n.key_errors,function(r,n){e='<div style="margin-bottom: 4px">',e+="<strong>"+r+":</strong> ",e+="<ul>",n.forEach(function(r){e+="<li>"+r+"</li>"}),e+="</ul>",e+="</div>",i>l&&(e+='<hr class="hr" />'),t.push(e),l++}),a.alerter.render(s,t.join(""))}}}(jQuery,window.cgsy.abstracts);/**
 * @module
 * @name Congressy Abstracts - Form
 * @namespace window.cgsy.abstracts.form
 * @description Módulo de Mapeamento de Campos de Formulário
 * @depends
 *  - jQuery
 *  - window.cgsy.abstracts.dom
 *  - window.cgsy.abstracts.error
 */
window.cgsy=window.cgsy||{},window.cgsy.abstracts=window.cgsy.abstracts||{},function(t,e){"use strict";e.form={},e.form.FieldMapper=function(n){var a=this;n=t(n),this.dom_mapper=new e.dom.DOMManager,this.field_names={},this.list_fields=[],this.ignored=[],this.data={},this.ignore=function(t,e){a.ignored.includes(t)!==!0&&(e===!0&&console.warn("Campo ignorado: "+t),a.ignored.push(t))},this.isIgnored=function(t){return a.ignored.includes(t)},this.enableStrictMode=function(){a.dom_mapper.setAsStrictKeys()},this.disableStrictMode=function(){a.dom_mapper.setAsNotStrictKeys()},this.syncDataAndDom=function(){return a.data={},new Promise(function(e){var i=function(n){n=n||[];var i={};n.forEach(function(t){var e=t.name,n=t.value;a.isIgnored(e)||n&&(i[e]=n)}),t.each(i,function(t,e){a.data[t]=e}),t.each(a.data,function(t,e){a.set(t,e)}),e(a.data)},o=n.serializeArray(),r=t("input[type=file]"),s=r.length,d=0;if(s===0)return i(o),void 0;var c=function(t,e){o.push({name:t,value:e.result}),s-1===d?i(o):d++};t.each(r,function(){var e=t(this).attr("name"),n=t(this).get(0).files[0];if(!n)return s-1===d?i(o):d++,void 0;var a=new FileReader;a.onloadend=function(){c(e,a)},a.readAsDataURL(n)})})},this.getData=function(){return a.data||console.warn("Formulário sem dados. Você deve rodar syncDataAndDom() para sincronizar os dado do formulário."),a.data},this.clear=function(){a.sync().then(function(t){Object.keys(t).forEach(function(t){a.isIgnored(t)||a.dom_mapper.insertValue(t,null,!1)}),a.data={}})},this.populate=function(e){Object.keys(e).forEach(function(n){if(!a.isIgnored(n)){var i=e[n];i===null||i===void 0?i="":t.isArray(i)===!1&&(i+=""),a.data[n]=i,a.dom_mapper.insertValue(n,i,!1)}})},this.set=function(t,e){a.isIgnored(t)||(a.data[t]=e,a.dom_mapper.insertValue(t,e,!1))},this.get=function(t){return a.isIgnored(t)?void 0:a.dom_mapper.getEl(t).val()},t.each(t("input, select, textarea",n),function(){var e=t(this),n=e.attr("name"),i=e.get(0).tagName,o=e.attr("type");o!=="button"&&(a.isIgnored(n)||a.field_names.hasOwnProperty(n)||(a.field_names[n]=(i+"").toLowerCase()+"[name="+n+"]"))}),Object.keys(a.field_names).forEach(function(e){if(!a.isIgnored(e)){var i=t(a.field_names[e],n);i.length>1&&a.list_fields.push(e),a.dom_mapper.setElement(e,i)}}),a.dom_mapper.setAsStrictKeys(),a.syncDataAndDom()}}(jQuery,window.cgsy.abstracts);/**
 * @module
 * @name Congressy Abstracts - HTTP
 * @namespace window.cgsy.abstracts.form
 * @description Cliente HTTP para requisições REST.
 * @depends
 *  - jQuery
 *  - window.cgsy.AjaxSender
 *  - window.cgsy.abstracts.error
 */
window.cgsy=window.cgsy||{},window.cgsy.abstracts=window.cgsy.abstracts||{},function(t,e){"use strict";t.http={},t.http.Client=function(t){var r=this;this.error_handler=t;var s;this.http_status=null,this.auth_token=null,r.error_handler&&["setNonKeyError","setKeyError"].forEach(function(t){r.error_handler.hasOwnProperty(t)&&typeof r.error_handler[t]=="function"||(s='Error handler não é possui "'+t+'".',alert(s),console.error(s))}),this.fetch=function(t){return new Promise(function(e){r._getClient(t,e).get()})},this.create=function(t,e){return new Promise(function(s){r._getClient(t,s).post(e)})},this.update=function(t,e){return new Promise(function(s){r._getClient(t,s).put(e)})},this.patch=function(t,e){return new Promise(function(s){r._getClient(t,s).patch(e)})},this.delete=function(t){return new Promise(function(e){r._getClient(t,e).delete()})},this._getClient=function(t,s){r.error_handler.reset();var n=new e(t);return n.auth_token=r.auth_token,n.setSuccessCallback(r._getSuccessCallback(s)),n.setFailCallback(r._getFailCallback(t,s)),n},this._getSuccessCallback=function(t){return function(e,s,n){r.http_status=n.status,e.hasOwnProperty("result")?e=e.result:e.hasOwnProperty("results")?e=e.results:e.hasOwnProperty("responseJSON")||e||r.error_handler.setNonKeyError("Requisição bem sucedida, porém com resposta desconhecida na requisição."),t({type:"success",status:r.http_status,result:e})}},this._getFailCallback=function(t,e){return function(s){r.http_status=s.status;var n=s,o='Erro ao buscar dados de "'+t+'".';if(s.hasOwnProperty("responseJSON")){var a=s.responseJSON;a.hasOwnProperty("detail")&&(o=a.detail)}console.error(o,n),e({type:"error",status:r.http_status,result:n})}}}}(window.cgsy.abstracts,window.cgsy.AjaxSender);/**
 * @module
 * @name Congressy Abstracts - FORM
 * @namespace window.cgsy.abstracts.form
 * @description Gerenciamento de Formulário e erros de formulário.
 * @depends
 *  - jQuery
 *  - window.cgsy.abstracts.dom
 *  - window.cgsy.abstracts.error
 *  - window.cgsy.abstracts.alerter
 *  - window.cgsy.abstracts.form.FieldMapper
 */
window.cgsy=window.cgsy||{},window.cgsy.abstracts=window.cgsy.abstracts||{},window.cgsy.abstracts.form=window.cgsy.abstracts.form||{},function(e,t){"use strict";t.form.Form=function(r){t.dom.Component.call(this);var n=this;n.strict(),n.dom_manager.domElements.button=null,n.dom_manager.domElements["close-after-save-switch"]=null,this.processing=!1,this.afterSaveCallback=function(){},this.save_and_remain=!1,this.button_text="Salvar",this.success_message="Dados salvos com sucesso.",this.form_el=e(r),this.alerter_el=e(".messages",n.form_el),this.alerter_el=n.alerter_el.length?n.alerter_el:n.form_el,this.alerter=new t.alerter.Alerter(n.alerter_el),this.fields_mapper=new t.form.FieldMapper(n.form_el),this.preSaveCallbacks=[],this.postSaveCallbacks=[],this.ignore=function(e,t){o(),n.fields_mapper.ignore(e,t)},this.strictModeOn=function(){n.fields_mapper.enableStrictMode()},this.strictModeOff=function(){n.fields_mapper.disableStrictMode()},this.syncDataAndDom=function(){return o(),n.fields_mapper.syncDataAndDom()},this.getData=function(){return o(),n.fields_mapper.getData()},this.clear=function(){n.fields_mapper.clear()},this.get=function(e){return n.fields_mapper.get(e)},this.set=function(e,t){return n.fields_mapper.set(e,t)},this.populate=function(e){o(),this.fields_mapper.populate(e)},this.disableSubmitButton=function(){var e=n.getEl("button");e&&e.attr("disabled","").text("aguarde ...")},this.enableSubmitButton=function(){var e=n.getEl("button");e&&(e.removeAttr("disabled"),e.text(n.button_text))},this.save=function(){return new Promise(function(e,t){return n.processing===!0?t("Ainda processando..."):(n.processing=!0,n.syncDataAndDom().then(function(){n.alerter.clear(),n.preSave(),n.preSaveCallbacks.forEach(function(e){e()}),n.saveHandler().then(function(){n.save_and_remain=!1,n.processing=!1,n.enableSubmitButton(),n.alerter.renderSuccess(n.success_message),n.postSave(),n.postSaveCallbacks.forEach(function(e){e()}),e(n.getData())},function(e){t(e)})},function(e){n.alerter.clear(),n.save_and_remain=!1,n.processing=!1,n.enableSubmitButton(),t(e)}),void 0)})},this.preSave=function(){},this.postSave=function(){},this.addPreSaveCallback=function(e){typeof e=="function"&&n.preSaveCallbacks.push(e)},this.addPostSaveCallback=function(e){typeof e=="function"&&n.postSaveCallbacks.push(e)},this.saveHandler=function(){return new Promise(function(e){console.warn("<form>.saveHandler() not implemented."),e()})};var s=!1,o=function(){var t=n.getEl("button");t&&(n.enableSubmitButton(),t.unbind("click"),t.on("click",function(e){e.preventDefault(),n.disableSubmitButton(),n.save()})),s||(n.form_el.append(e("<button>").attr("type","submit").css("hide")),n.form_el.unbind("submit"),n.form_el.on("submit",function(e){e.preventDefault(),n.disableSubmitButton(),n.save()}),s=!0)};window.setTimeout(function(){o()},10)},t.form.Form.prototype=Object.create(t.dom.Component.prototype),t.form.Form.prototype.constructor=t.form.Form,t.form.FormErrorAlerter=function(r,n){var s=this;this.main_message="<strong>O formulário possui errors:</strong>",this.alerter=new t.alerter.ErrorAlerter(r,n),this.clear=function(){s.alerter.clear(),e(".has-error",r).remove()},this.notify=function(){s.clear(),Object.keys(n.key_errors).length>0&&!n.non_key_errors.includes(s.main_message)&&n.non_key_errors.unshift("<strong>O formulário possui errors:</strong>");var t=[];e.each(n.key_errors,function(o,a){if(!t.includes(o)){t.push(o);var i=e("[name="+o+"]",r);if(i.length!==0){var l;i.length>1&&(i=e(i.get(0))),l=i.closest(".form-group"),a.forEach(function(e){l.append(s.getErrorEl(l,e))}),delete n.key_errors[o]}}}),s.alerter.notify()},this.getErrorEl=function(t,r){var n=t.find(".has-error");return n.length||(n=e('<div class="has-error">').css("color","darkred")),n.html(r),n}}}(jQuery,window.cgsy.abstracts);/**
 * @module
 * @name Congressy Abstracts - Model
 * @namespace window.cgsy.abstracts.domain
 * @description Modelos de domínio e todas as suas interações.
 * @depends
 *  - jQuery
 *  - window.cgsy.AjaxSender
 *  - window.cgsy.abstracts.error
 *  - window.cgsy.abstracts.http
 */
window.cgsy=window.cgsy||{},window.cgsy.abstracts=window.cgsy.abstracts||{},function(e,r){"use strict";e.domain={},e.domain.Field=function(e,t,n,i){var o=this;this.name=e,this.label=t,this.type=n,this.required=i===!0,this.blank=!1,this.has_error=!1,this.submittable=!0;var a,s='message not set for "'+t+'"';this.setMessage=function(e){s=e},this.getMessage=function(){return s},this.getValue=function(){return a},this.setValue=function(e){a=u(e)};var u=function(e){var t,i=e===void 0||e===null,a=typeof e=="number",s=a&&e%1!==0,u=typeof e=="boolean",l=typeof e=="string",d=e instanceof Array,c=e instanceof Date,h=o.required===!0;switch(o.has_error=!1,n.toLowerCase()){case"integer":case"number":h&&!a||!i&&!a?(o.has_error=!0,t=void 0):e&&(t=s?parseFloat(e):parseInt(e));break;case"float":h&&!a||!i&&!a?(o.has_error=!0,t=void 0):t=e?parseFloat(e):e;break;case"boolean":!h||u||l?t=e===!0||e==="true"||e==="on":(o.has_error=!0,t=void 0);break;case"list":h&&!d||d&&e.length===0||!i&&!d?(o.has_error=!0,t=void 0):t=e;break;case"date":h&&!l&&!c||!l&&!c||!r(e,"YYYY-MM-DD",!0).isValid()?(o.has_error=!0,t=void 0):t=e?c?r(e):e?r(e,"YYYY-MM-DD"):e:e;break;case"datetime":h&&!l&&!c||!l&&!c||!r(e,"YYYY-MM-DD HH:mm:ss",!0).isValid()?(o.has_error=!0,t=void 0):t=e?c?r(e):e?r(e,"YYYY-MM-DD HH:mm:ss"):e:e;break;case"string":var f=u||d||a;h&&f||!i&&f?(o.has_error=!0,t=void 0):t=e;break;default:t=e}if(o.has_error){var p=o.getMessage()||o.label+": ";console.warn(p+" Valor informado: "+e+" ("+typeof e+").")}return t}},e.domain.ModelError=function(r){e.error.Error.call(this);var t=this;this.model_instance=r,this.isValidForFetch=function(){var e=r.hasOwnProperty("pk")&&r.pk;return e||t.setKeyError("pk","Entidade não possui ID."),e&&t.non_key_errors.length===0},this.isValidForCreate=function(){this.key_errors={};var e=!0;return r.pk&&(t.setKeyError("pk","Entidade já existe."),e=!1),e=e===!0&&n(),e&&t.non_key_errors.length===0},this.isValidForUpdate=function(){this.key_errors={};var e=!0;return r.hasOwnProperty("pk")&&r.pk||(t.setKeyError("pk","Entidade não possui ID."),e=!1),e=e===!0&&n(),e&&t.non_key_errors.length===0},this.isValidForDelete=this.isValidForUpdate;var n=function(){var e=!0;return r.getFieldNames().forEach(function(n){var i=r.getField(n);if(i.name!=="pk"&&i.required!==!1){var o=i.getValue(),a=o===null||o===void 0;a&&r.isBlank(i.name)===!1&&(e=!1,t.setKeyError(i.name,i.getMessage()))}}),e}},e.domain.ModelError.prototype=Object.create(e.error.Error.prototype),e.domain.ModelError.prototype.constructor=e.domain.ModelError,e.domain.Model=function(r){var t=this;this.pk=r,this.pk_type="integer",this.fields=[],this.verbose_name="",this.verbose_name_plural="",this.uri_manager=null,this.creation_uri="",this.uri=null,this.error_handler=new e.domain.ModelError(this),this.client=new e.http.Client(t.error_handler);var n={},i=[],o=[],a=[],s=[],u=[],l=[],d=!1,c=!1;this.getCreationUri=function(){if(!t.uri_manager)return console.error("<model>.uri_manager not configured."),"";var e=t.creation_uri;if(!e)return console.error("<model>.creation_uri not configured."),"";var r=!1;return t.getFieldNames().forEach(function(n){var i="{{"+n+"}}";if(e.includes(i)){var o=t.getField(n),a=o.getValue();a?e=e.replace(i,a):(r=!0,console.error('Valor inexistente para critério "'+i+'"'))}}),r?(t.error_handler.setNonKeyError("URI inválida."),""):t.uri_manager.getUri(e)},this.getUri=function(){var e=t.getUriManager();if(!e)return"";var r=this.uri||"";if(!r)return console.error("<model>.uri not configured."),"";var n=!1;return t.getFieldNames().forEach(function(e){var i="{{"+e+"}}";if(r.includes(i)){var o=t.getField(e),a=o.getValue();a?r=r.replace(i,a):(n=!0,console.error('Valor inexistente para critério "'+i+'".'))}}),n?(t.error_handler.setNonKeyError("URI inválida."),""):e.getUri(r)},this.getUriManager=function(){var e=t.uri_manager;return e||console.error("<model>.uri_manager not configured."),e},this.hasField=function(e){return f(),i.includes(e)},this.isBoolean=function(e){return f(),a.includes(e)},this.isInteger=function(e){return f(),s.includes(e)},this.isRequired=function(e){return f(),o.includes(e)},this.isSubmittable=function(e){return f(),l.includes(e)},this.isBlank=function(e){return f(),u.includes(e)},this.isNew=function(){return!t.pk},this.isValid=function(){f(),t.pk&&!t.get("pk")&&t.set("pk",t.pk);var e=Object.keys(t.error_handler.key_errors).length>0,r=t.error_handler.non_key_errors.length>0;if(n=n&&r===!1&&e===!1,n===!1)return!1;var n=t.isNew()?t.error_handler.isValidForCreate():t.error_handler.isValidForUpdate();return e=Object.keys(t.error_handler.key_errors).length>0,r=t.error_handler.non_key_errors.length>0,n=n&&r===!1&&e===!1,n===!0},this.isFetchable=function(){return t.error_handler.isValidForFetch()},this.getFieldNames=function(){return f(),i},this.getFields=function(){return f(),n},this.getField=function(e){return f(),t.hasField(e)?n[e]:(console.warn('Campo "'+e+'" não existe no model.'),void 0)},this.set=function(e,r){if(f(),!t.hasField(e))return console.warn('Campo "'+e+'" não existe no model.'),t;var i=n[e];i.setValue(r);var o=["pk","id","uuid"];return o.forEach(function(n){e===n&&(t.pk_type==="integer"&&(r=parseInt(r)),t.pk=r)}),i.has_error&&t.error_handler.setKeyError(i.label,i.getMessage()),t},this.get=function(e){return f(),t.hasField(e)?t.getField(e).getValue():(console.warn('Campo "'+e+'" não existe no model.'),void 0)},this.toPlainObject=function(){f();var e={};return Object.keys(n).forEach(function(r){var t=n[r],i=t.getValue();switch(i===void 0&&(i=null),t.type){case"datetime":e[r]=i?i.format("YYYY-MM-DD HH:mm:ss"):"0000-00-00 00:00:00";break;case"date":e[r]=i?i.format("YYYY-MM-DD"):"0000-00-00";break;case"boolean":e[r]=i===!0;break;case"string":e[r]=i?i:"";break;default:e[r]=i}}),e},this.populate=function(e){if(f(),e){var r=["pk","id","uuid"];r.forEach(function(r){e.hasOwnProperty(r)&&e[r]&&(t.pk_type==="integer"&&(e[r]=parseInt(e[r])),t.set("pk",e[r]))}),t.getFieldNames().forEach(function(n){if(e.hasOwnProperty(n)&&!r.includes(n)&&t.hasField(n)){var i=t.getField(n),o=e[n];switch(i.type){case"boolean":o=o===!0;break;case"integer":o=parseInt(o);break;case"float":o=parseFloat(o)}t.set(n,o)}}),c=!0}},this.fetch=function(){return new Promise(function(e,r){if(!t.error_handler.isValidForFetch())return r(),void 0;var n=t.getUri();return n?(t.client.fetch(n).then(function(n){return n.type!=="success"?(h(n.result),r()):(t.populate(n.result),e(),void 0)}),void 0):(r(),void 0)})},this.delete=function(){return new Promise(function(e,r){if(!t.error_handler.isValidForDelete())return r(),void 0;var n=t.getUri();return n?(t.client.delete(n).then(function(t){return t.type!=="success"?(h(t.result),r()):(e(),void 0)}),void 0):(r(),void 0)})},this.save=function(){return new Promise(function(e,r){return t.isNew()?(t._create().then(function(){e()},function(e){r(e)}),void 0):(t._update().then(function(){e()},function(e){r(e)}),void 0)})},this._create=function(){return new Promise(function(e,r){if(!t.error_handler.isValidForCreate())return r(),void 0;var n=t.getCreationUri();return n?(t.client.create(n,t.toPlainObject()).then(function(n){return n.type!=="success"?(h(n.result),r()):(t.populate(n.result),e(),void 0)}),void 0):(r(),void 0)})},this._update=function(){return new Promise(function(e){if(!t.error_handler.isValidForUpdate())return e(),void 0;var r=t.getUri();return r?(t.client.update(r,t.toPlainObject()).then(function(r){r.type!=="success"?h(r.result):t.populate(r.result),e()}),void 0):(e(),void 0)})};var h=function(e){e.hasOwnProperty("responseJSON")&&(e=e.responseJSON),t.getFieldNames().forEach(function(r){var n=t.getField(r),i=n.getMessage();if(e.hasOwnProperty(r)){var o=e[r];o instanceof Array?o.forEach(function(e){var r=i?i:e;t.error_handler.setKeyError(n.name,r)}):t.error_handler.setKeyError(n.name,o)}})},f=function(){if(!d){t.client.auth_token=t.uri_manager.getAuthToken();var r=new e.domain.Field("pk","ID",t.pk_type,!0);r.setMessage("ID deve ser informado."),t.pk&&(t.type==="integer"&&(t.pk=parseInt(t.pk)),r.setValue(t.pk)),n.pk=r,i.push("pk"),Object.keys(t.fields).forEach(function(r){var d=t.fields[r];if(!d.hasOwnProperty("type"))return console.error('Campo mal configurado: "'+r+'" não possui "type".'),void 0;if(!d.hasOwnProperty("required"))return console.error('Campo mal configurado: "'+r+'" não possui "required."'),void 0;if(typeof d.required!="boolean")return console.error('Campo mal configurado: valor de "required" para "'+r+'" deve ser boolean.'),void 0;var c=r;d.hasOwnProperty("label")&&(c=d.label);var h=new e.domain.Field(r,c,d.type,d.required===!0);return d.hasOwnProperty("message")||d.required!==!0?(h.setMessage(d.message),d.hasOwnProperty("submittable")&&d.submittable===!1?h.submittable=!1:l.push(r),d.hasOwnProperty("blank")&&d.blank===!0&&(h.blank=!0,u.push(r)),n[r]=h,i.push(r),d.type==="integer"&&s.push(r),d.type==="boolean"&&a.push(r),d.required===!0&&o.push(r),void 0):(console.error('Campo mal configurado: "'+r+'" é obrigatório e não possiu "message".'),void 0)}),d=!0}};window.setTimeout(function(){f()},50)}}(window.cgsy.abstracts,moment);/**
 * @module
 * @name Congressy Abstracts - Coleção de Modelos
 * @namespace window.cgsy.abstracts.domain
 * @description Coleção de modelos e suas interações.
 * @depends
 *  - jQuery
 *  - window.cgsy.AjaxSender
 *  - window.cgsy.abstracts.error
 *  - window.cgsy.abstracts.http
 *  - window.cgsy.abstracts.domain
 */
window.cgsy=window.cgsy||{},window.cgsy.abstracts=window.cgsy.abstracts||{},function(r){"use strict";r.domain.Collection=function(){var e=this;this.items=[],this.model_class=void 0,this.uri_manager=null,this.uri=null,this.error_handler=new r.error.Error,this.client=new r.http.Client(e.error_handler),this.getUriManager=function(){var r=e.uri_manager;return r||console.error("<collection>.uri_manager not configured."),r},this.getUri=function(){var r=e.getUriManager();if(!r)return"";var n=this.uri;return n?r.getUri(n):(console.error("<model>.uri not configured."),"")},this.create=function(r){var e=null,n=["pk","id","uuid"];if(n.forEach(function(n){r.hasOwnProperty(n)&&(e=r[n])}),!e)return console.error("PK não encontrado: ",r),void 0;var t=new this.model_class(e);return t.populate(r),t},this.isValid=function(){e.items.forEach(function(r){r.isValid()||(r.error_handler.non_key_errors.length&&r.error_handler.non_key_errors.forEach(function(r){e.error_handler.setNonKeyError(r)}),Object.keys(r.error_handler.key_errors).length&&Object.keys(r.error_handler.key_errors).forEach(function(n){e.error_handler.setKeyError(n,r.error_handler.key_errors[n])}))});var r=Object.keys(e.error_handler.key_errors).length>0,n=e.error_handler.non_key_errors.length>0;return n===!1&&r===!1},this.remove=function(r){this._pre_remove(),e.items=e.items.filter(function(e){return e.pk!==r.pk}),this._post_remove()},this.add=function(r){return this.model_class===void 0?(console.error("<collection>.model_class not configured"),void 0):(r instanceof this.model_class&&r.isValid(!1)&&(this._pre_add(),this.items.push(r),this._post_add()),void 0)},this.fetch=function(){return new Promise(function(r,n){e.items=[];var t=e.getUri();return t?e.isValid()?(e.client.fetch(t).then(function(t){return e.isValid()?(t.type==="success"&&$.each(t.result,function(r,t){var o=e.create(t);return e.isValid()?(e.add(o),void 0):(n(),void 0)}),r(e.items),void 0):(n(),void 0)}),void 0):(n(),void 0):(n(),void 0)})},this._pre_add=function(){},this._post_add=function(){},this._pre_remove=function(){},this._post_remove=function(){}}}(window.cgsy.abstracts);/**
 * @module
 * @name Congressy Abstracts - Formulário de Modelo de Domínio.
 * @namespace window.cgsy.abstracts.form
 * @description Coleção de modelos e suas interações.
 * @depends
 *  - jQuery
 *  - window.cgsy.AjaxSender
 *  - window.cgsy.abstracts.dom
 *  - window.cgsy.abstracts.error
 *  - window.cgsy.abstracts.alerter
 *  - window.cgsy.abstracts.http
 *  - window.cgsy.abstracts.form.FieldMapper
 *  - window.cgsy.abstracts.form
 */
window.cgsy=window.cgsy||{},window.cgsy.abstracts=window.cgsy.abstracts||{},window.cgsy.abstracts.form=window.cgsy.abstracts.form||{},function(e,t){"use strict";t.form.ModelForm=function(e,o){t.form.Form.call(this,o);var r=this;r.ignore("pk"),this.model_instance=e,this.afterSaveCallback=function(){},this.error_alerter=new t.form.FormErrorAlerter(r.alerter_el,e.error_handler),this.setAfterSaveCallback=function(e){typeof e!="function"&&(r.afterSaveCallback=e)},this.isValid=function(){return r.model_instance.isValid()},this.toForm=function(){r.model_instance&&r.populate(r.model_instance.toPlainObject())},this.toModel=function(){if(r.model_instance){var e=r.getData();r.model_instance.getFieldNames().forEach(function(t){var o=r.model_instance.getField(t);if(e.hasOwnProperty(t)){var n=e[t];switch(o.type){case"integer":case"number":var a=n%1!==0;n=a?parseFloat(n):parseInt(n);break;case"float":n=parseFloat(n);break;case"boolean":n=n===!0||n==="true"||n==="on"}e[t]=n}else switch(o.type){case"boolean":e[t]=!1}}),r.model_instance.populate(e)}},this.fetch=function(){return new Promise(function(e){return r.model_instance.isFetchable()?(r.model_instance.fetch().then(function(){r.isValid()?(r.toForm(),r.syncDataAndDom().then(function(){e()})):(r.error_alerter.notify(),e())}),void 0):(r.error_alerter.notify(),e(),void 0)})},this.save=function(){return new Promise(function(e){return r.processing===!0?(e(r.getData()),void 0):(r.processing=!0,r.syncDataAndDom().then(function(){r.toModel(),r.model_instance.save().then(function(){r.isValid()?(r.alerter.clear(),r.alerter.renderSuccess("Dados salvos com sucesso.")):r.error_alerter.notify(),r.enableSubmitButton(),r.processing=!1,r.save_and_remain===!1&&r.afterSaveCallback(),e(r.getData())})}),void 0)})}},t.form.ModelForm.prototype=Object.create(t.form.Form.prototype),t.form.ModelForm.prototype.constructor=t.form.ModelForm}(jQuery,window.cgsy.abstracts);/**
 * @module
 * @name Congressy Abstracts - Elementos de Listas e Tabelas
 * @namespace window.cgsy.abstracts.element.list
 * @description Tabelas e listas.
 * @depends
 *  - jQuery
 *  - DataTables
 *  - window.cgsy.AjaxSender
 *  - window.cgsy.abstracts.dom
 *  - window.cgsy.abstracts.error
 *  - window.cgsy.abstracts.messenger
 *  - window.cgsy.abstracts.http
 *  - window.cgsy.abstracts.domain
 */
window.cgsy=window.cgsy||{},window.cgsy.abstracts=window.cgsy.abstracts||{},window.cgsy.abstracts.element=window.cgsy.abstracts.element||{},window.cgsy.abstracts.element.list=window.cgsy.abstracts.element.list||{},function(e,t){"use strict";t.element.list.Header=function(e,t,n,a){var s=[];this.getName=function(){return e},this.getLabel=function(){return t},this.getClasses=function(){return n},this.getWidth=function(){return a},this.addValue=function(e){s.push(e)},this.getValues=function(){return s}},t.element.list.ActionButton=function(e,t,n){this.getLabel=function(){return e},this.getIconClass=function(){return t},this.getHandler=function(){return n||function(){}}},t.element.list.Table=function(n){var a=this,s=!1;this.parent_el=e(n),this.table_el=null,this.after_render_callback=function(){},this.headers=[],this.show_headers=!0,this.items=[],this.column_handlers={},this.action_buttons=[],this.hideHeaders=function(){a.show_headers=!1},this.addHeader=function(e,n,s,r){a.headers.push(new t.element.list.Header(e,n,s,r))},this.getHeaderNames=function(){return a.headers.map(function(e){return e.getName()})},this.hasHeader=function(e){var t=!1;return a.getHeaderNames().forEach(function(n){e===n&&(t=!0)}),t},this.addColumnHandler=function(e,t){return a.hasHeader(e)?typeof t!="function"?(console.warn("Handler não é uma função: "+t),void 0):(this.column_handlers[e]=t,void 0):(console.warn("Coluna não existe: "+e),void 0)},this.addActionButton=function(e,n,a){this.action_buttons.push(new t.element.list.ActionButton(e,n,a))},this.showLoader=function(){a.parent_el.find("table").hide(),a.getLoaderEl().fadeIn()},this.setItems=function(e){a.items=e||[]},this.addItem=function(e){a.items.push(e)},this.setAfterRenderCallback=function(e){typeof e=="function"&&(a.after_render_callback=e)},this.render=function(){if(a.headers.length===0)return console.warn("<element.List>.headers não configurado."),void 0;a.preRender();var e=a.getTableEl();e.hide(),a.getLoaderEl().fadeOut(function(){e.fadeIn(function(){a.postRender(),a.after_render_callback()})})},this.getTableEl=function(){return a.table_el?a.table_el:(a.table_el=e("<table>").addClass("table table-striped table-bordered"),a.parent_el.html(a.table_el),a.items.length===0?(a.table_el.append(e("<tbody>").append(e("<tr>").append(e("<td>").css("text-align","center").attr("colspan",a.headers.length+3).html("Sem registros")))),a.table_el):(r(a.table_el),o(),i(a.table_el),a.table_el))},this.getLoaderEl=function(){var t=a.parent_el.find(".list-loader");return t.length===0&&(t=e("<div>").addClass("list-loader").css("text-align","center").css("display","none"),t.append(e("<span>").addClass("fas fa-circle-notch fa-spin fa-3x")),t.append(e("<div>").text("carregando")),a.parent_el.append(t)),t.show(),t},this.preRender=function(){},this.postRender=function(){};var r=function(n){if(s===!0)return a.headers;var r=["column_conf"];a.headers.forEach(function(e){r.includes(e.getName())&&console.error('Nome da coluna não pode ser "'+e.getName()+'".'+" Nomes reservados: "+r.join(", "))});var o=a.headers;a.action_buttons.length>0&&o.push(new t.element.list.Header("column_conf",null,"text-center","1%"));var i=e("<thead>");a.show_headers===!1&&i.addClass("hide");var l=e("<tr>");return n.append(i),i.append(l),o.forEach(function(t){var n=e("<th>");n.appendTo(l),t.getClasses()&&n.addClass(t.getClasses()),t.getWidth()&&n.css("width",t.getWidth()),n.html(t.getLabel())}),s=!0,a.headers=o,o},o=function(){var e=a.headers[a.headers.length-1],t=0;a.items.forEach(function(n){a.headers.forEach(function(t){var s=t.getName();a.action_buttons.length>0&&s===e.getName()||(a.column_handlers.hasOwnProperty(s)&&typeof a.column_handlers[s]=="function"?t.addValue(a.column_handlers[s]):t.addValue(n[s]))}),a.action_buttons.length>0&&e.addValue(l(n)),t++})},i=function(t){var n=e("<tbody>");t.append(n);for(var s=0;a.items.length>s;s++){var r=e("<tr>"),o=a.items[s];a.headers.forEach(function(t){if(t.getValues().length!==0){var n=t.getValues();if(!(s>n.length)){var a=n[s],i=e("<td>");t.getClasses()&&i.addClass(t.getClasses()),t.getWidth()&&i.css("width",t.getWidth()),typeof a=="function"&&(a=a(o)),i.html(a),r.append(i)}}}),n.append(r)}},l=function(t){if(a.action_buttons.length===0)return void 0;var n=e("<div>").addClass("btn-group"),s=e("<button>").addClass("btn btn-primary btn-trans btn-sm dropdown-toggle").attr({type:"button","data-toggle":"dropdown","aria-expanded":"true"}).append(e("<span>").addClass("fas fa-cog"));if(n.append(s),a.action_buttons.length===0)return s.attr("disabled","disabled"),n;var r=e("<ul>").addClass("dropdown-menu dropdown-menu-right").attr("role","menu");return n.append(r),a.action_buttons.forEach(function(n){var a=e("<li>"),s=e("<a>").attr("href","javascript:void(0)");a.append(s);var o=n.getIconClass();if(o){var i=e("<i>").addClass(o);s.append(i)}s.append(e("<span>").html(n.getLabel()));var l=n.getHandler();typeof l=="function"&&s.on("click",function(e){e.preventDefault(),l(t)}),r.append(a)}),n}},t.element.list.DataTable=function(e){var t=this,n=[],a=[];this.table=e,this.language={sEmptyTable:"Nenhum registro encontrado",sInfo:"Mostrando de _START_ até _END_ de _TOTAL_ registros",sInfoEmpty:"Mostrando 0 até 0 de 0 registros",sInfoFiltered:"(Filtrados de _MAX_ registros)",sInfoPostFix:"",sInfoThousands:".",sLengthMenu:"_MENU_ resultados por página",sLoadingRecords:"Carregando...",sProcessing:"Processando...",sZeroRecords:"Nenhum registro encontrado",sSearch:"Pesquisar",oPaginate:{sNext:"Próximo",sPrevious:"Anterior",sFirst:"Primeiro",sLast:"Último"},oAria:{sSortAscending:": Ordenar colunas de forma ascendente",sSortDescending:": Ordenar colunas de forma descendente"}},this.orderable=function(e){n.includes(e)||n.push(e)},this.searchable=function(e){a.includes(e)||a.push(e)},this.render=function(){if(t.table.headers.length===0)return t.table.render(),void 0;var e=[{orderable:!1,searchable:!1,targets:[-1]}],s=0,r=null;t.table.getHeaderNames().forEach(function(t){n.includes(t)||(r===null&&n.includes(t)&&(r=s),e.push({orderable:n.includes(t),searchable:a.includes(t),targets:s}),s++)});var o={language:t.language,columnDefs:e};r!==null&&(o.order=[[r,"asc"]]),t.table.getTableEl().DataTable(o);var i=t.table.parent_el.find(".dataTables_wrapper");i.hide(),t.table.showLoader(),t.table.getLoaderEl().fadeOut(function(){i.fadeIn(function(){t.table.getTableEl().show(),t.table.after_render_callback()})})}},t.element.list.CollectionTable=function(e,n){var a=this;this.collection=n,this.table=new t.element.list.Table(e),this.createActionButton=function(e,t,n){a.table.createActionButton(e,t,n)},this.fetch=function(){var e=s("collection-table-fetch");return e.closeAll(),e.notify_loader(),new Promise(function(){a.collection.fetch().then(function(t){if(e.close(),!a.collection.isValid()){var n=s(),r=a.collection.client.http_status;a.collection.error_handler.non_key_errors.forEach(function(e){n.notifyError(e)}),(r===0||r>=500)&&e.retry(function(){a.fetch()},"Tentando novamente.")}t=t.map(function(e){return e.toPlainObject()}),a.table.render(t)})})};var s=function(e){return new t.messenger.Messenger(e)}}}(jQuery,window.cgsy.abstracts);window.cgsy=window.cgsy||{},window.cgsy.abstracts=window.cgsy.abstracts||{},function(e,o){"use strict";o.modal={},o.modal.Modal=function(t){o.dom.Component.call(this);var n=this;n.strict(),this.modal_el=e(t),this.loader_message="aguarde...",this.getLoaderEl=function(){var o=e(".modal-loader",n.modal_el);if(o.length===0){o=e("<div>").css({width:"100%",height:"200px",display:"none"}).addClass("modal-loader");var t=e("<div>").css({width:"82px",margin:"100px auto","text-align":"center"});t.append(e("<span>").addClass("fas fa-circle-notch fa-spin fa-3x")),t.append(e("<span>").text(n.loader_message)),o.append(t),o.append(e("<div>").addClass("clearfix")),e(".modal-content",n.modal_el).prepend(o)}return o},this.getHeaderEl=function(){return e(".modal-header",n.modal_el)},this.getTitleEl=function(){return e(".modal-title",n.modal_el)},this.getBodyEl=function(){return e(".modal-body",n.modal_el)},this.getFooterEl=function(){return e(".modal-footer",n.modal_el)},this.prepareModalEl=function(){n.modal_el.off("show.bs.modal"),n.modal_el.on("show.bs.modal",function(){n.postModalLoad()})},this.loadElement=function(o){var t=n.getBodyEl();return t&&t.length!==0?(t.html(o),e(o).show(),void 0):(console.warn("Elemento corpo do modal não informado."),void 0)},this.setTitle=function(e){var o=n.getTitleEl();return o&&o.length!==0?(o.html(e),void 0):(console.warn("Elemento de título do modal não informado."),void 0)},this.open=function(){n.prepareModalEl(),n.preModalLoad(),n.modal_el.modal()},this.close=function(){n.prepareModalEl(),n.modal_el.modal("hide")},this.setAsLoading=function(){var e=n.getLoaderEl(),o=n.getBodyEl();if(e&&o&&e.length!==0&&o.length!==0){e.show(),o.hide();var t=n.getHeaderEl();t&&t.length&&t.hide();var l=n.getFooterEl();l&&l.length&&l.hide()}},this.setAsReady=function(){var e=n.getLoaderEl(),o=n.getBodyEl();e&&o&&e.length!==0&&o.length!==0&&e.fadeOut(function(){o.fadeIn();var e=n.getHeaderEl();e&&e.length&&e.fadeIn();var t=n.getFooterEl();t&&t.length&&t.fadeIn()})},this.preModalLoad=function(){},this.postModalLoad=function(){}},o.modal.Modal.prototype=Object.create(o.dom.Component.prototype),o.modal.Modal.prototype.constructor=o.modal.Modal,o.modal.ModelForm=function(e,t){o.modal.Modal.call(this,e);var n=this;this.form=t,this.form_el=this.form.form_el,this.focus_field=null,this.title_for_new_model="Nova",this.title_for_existing_model="Editando",this.prepareModalEl=function(){n.modal_el.off("show.bs.modal"),n.modal_el.on("show.bs.modal",function(){n.postModalLoad(),window.setTimeout(function(){var e=n.form_el.find("input[name="+n.focus_field+"]");e.length>0&&e.focus()},200)})},window.setTimeout(function(){n.loadElement(n.form_el);var e,o=n.form.model_instance;o.isNew()===!1?o.verbose_name&&(e=n.title_for_existing_model+" "+o.verbose_name):o.verbose_name&&(e=n.title_for_new_model+" "+o.verbose_name),e||(e=o.verbose_name),e.length>50&&(e=e.substr(0,50)+" ..."),n.setTitle(e)},350)},o.modal.ModelForm.prototype=Object.create(o.modal.Modal.prototype),o.modal.ModelForm.prototype.constructor=o.modal.ModelForm,o.modal.Delete=function(t){o.modal.LoadableBaseModal.call(this),!t instanceof o.domain.Model&&console.error("model informado não é uma instância de abstracts.domain.Model");var n=this,l=null;this.model_instance=t,this.messenger_id="audience-category",this.detail_name_field="name",this.message="Tem certeza que deseja remover esta entidade de "+t.verbose_name.toUpperCase()+"?",this.dom_manager.domElements.title=null,this.dom_manager.domElements.message_field=null,this.dom_manager.domElements.details_field=null,this.dom_manager.domElements.confirmation_button=null,this.dom_manager.domElements.close_button=null;var a=function(){},s=function(){};this.setBeforeDeleteCallback=function(e){typeof e=="function"&&(a=e)},this.setAfterDeleteCallback=function(e){typeof e=="function"&&(s=e)},this.fetch=function(){n.setAsLoading(),n.clearMessages(),n.triggerMessengerLoader(),t.fetch().then(function(){if(t.is_valid())n.sync(),n.setAsReady();else{var e=t.error_status;e===0||e>=500?n.retryRequest(n.fetch,t.non_field_errors.join("\n"),n.messenger_instance):(n.showErrorMessenger(t.non_field_errors.join("\n"),n.messenger_instance),n.close())}})},this.open=function(e){e=e===!0,l=n.getModalElement(),this.pre_modal_load(),n.sync(),l.modal(),e===!0&&n.fetch()},this.close=function(){l.modal("hide")},this.delete=function(){a(),n.clearMessages(),n.triggerMessengerLoader(),t.delete().then(function(){if(t.is_valid())s(),n.showSuccessMessenger("Excluído com sucesso",n.messenger_instance);else{var e=t.error_status;e===0||e>=500?n.retryRequest(n.delete,t.non_field_errors.join("\n"),n.messenger_instance):(n.close(),n.showErrorMessenger(t.non_field_errors.join("\n"),n.messenger_instance))}})},this.sync=function(){if(!t.pk)return alert("Impossível excluir uma entidade sem identificador."),void 0;t.hasField(n.detail_name_field)||console.error('Campo "'+n.detail_name_field+'" não existe no model informado.');var o=n.getEl("close_button");o.off("click"),o.on("click",function(e){e.preventDefault(),n.close()});var l=n.getEl("confirmation_button");l.off("click"),l.on("click",function(e){e.preventDefault(),n.delete()});var a=t.getValue(n.detail_name_field);a||(a="UNKNONW");var s="Exclusão de "+a;s.length>50&&(s=s.substr(0,50)+" ...");var d=e("model-title",n.model_el);d&&d.length&&d.text(s.toUpperCase()),n.getEl("message_field").text(n.message),n.getEl("details_field").text(a+" (#ID: "+t.getValue("pk")+")")}}}(jQuery,window.cgsy.abstracts,window.cgsy.messenger);