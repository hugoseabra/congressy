{% extends "base/base.html" %}
{% load i18n static %}
{% load subscription_tags %}

{% block title %}Credenciamento | Congressy{% endblock %}

{% block page_title %}Credenciamento{% endblock %}
{% block page_sub_title %}{{ event.name }}{% endblock %}
{% block page_description %}
    Realize o credenciamento de inscritos confirmando sua presença no evento.
{% endblock %}

{% block styles %}{% endblock %}

{% block pageheader %}
    <div class="pageheader">
        <h1>Mudar título</h1>
    </div>
{% endblock %}


{% block content %}
    <div class="row">
        <div class="col-md-2 col-sm-12" id="compose-wrapper">
            {% include 'attendance/includes/attendance-menu.html' with active='checkin' %}
        </div>
        <div class="col-md-10">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="panel-title">Realizar Checkin</div>
                </div>
                <div class="panel-body">
                    <div id="cards-list"></div>

                </div>
            </div>
        </div>
    </div>


{% endblock %}

{% block scripts %}
    <script src="{% static 'assets/js/ajax.js' %}"></script>,
    <script src="{% static 'assets/js/attendance/attendance.js' %}"></script>,
    <script>
        var collection, attendance, subscription, subscription2, card, card2, attendance_list;
        $(document).ready(function() {
            collection = new window.cgsy.attendance.SubscriptionCollection(
                '{% url 'api:attendance:subscription-list' attendance_list.pk %}'
            );
            collection.fetch('LU').then(function() {
                console.log(collection);
            });


{#            subscription = new window.cgsy.attendance.Subscription(#}
{#                '97a7c7fb-84b2-4b9f-9a98-dcadad012981'#}
{#            );#}
{#            subscription2 = new window.cgsy.attendance.Subscription(#}
{#                '15c01d8b-487b-4a2a-9f9f-9d86d314a6a2'#}
{#            );#}
{#            subscription.setUri('{% url 'api:attendance:subscription-list' attendance_list.pk %}:pk/');#}
{#            subscription2.setUri('{% url 'api:attendance:subscription-list' attendance_list.pk %}:pk/');#}
{##}
{#            attendance = new window.cgsy.attendance.Attendance(#}
{#                '{% url 'api:attendance:checkin-list' %}',#}
{#                '{% url 'api:attendance:checkout-list' %}'#}
{#            );#}
{##}
{#            subscription.fetch({{ attendance_list.pk }}, 'Hugo').then(function() {#}
{##}
{#                subscription2.fetch({{ attendance_list.pk }}, 'Hugo').then(function() {#}
{##}
{#                    card = new window.cgsy.attendance.Card(subscription, attendance);#}
{#                    card2 = new window.cgsy.attendance.Card(subscription2, attendance);#}
{##}
{#                    attendance_list = new window.cgsy.attendance.List(1, 'Hugo');#}
{#                    attendance_list.addCard(card);#}
{#                    attendance_list.addCard(card2);#}
{#                    attendance_list.render($('#cards-list'));#}
{#                });#}
{#            });#}

        });
    </script>

{% endblock %}
