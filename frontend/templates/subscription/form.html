{% extends "base/base.html" %}
{% load i18n static %}

{% block title %}
    {% if object %}Editar{% else %}Nova{% endif %} Pré-inscrição | Congressy
{% endblock %}
{% block page_title %}
    {% if object %}Editar{% else %}Nova{% endif %} Pré-inscrição
{% endblock %}
{% block page_sub_title %}
    {% if object %}
        {{ object.person.name }} (ID: {{ object.pk }})
    {% endif %}
{% endblock %}


{% block content %}
    <form action="" method="post">
        {% csrf_token %}
        <div class="row">
            <div class="col-md-12">
                <div class="buttonbar">
                    <div class="float-right">
                        <a href="{% url 'subscription:subscription-list' event.pk %}"
                           class="btn btn-danger">
                            <i class="fa fa-close"></i>
                            Cancelar
                        </a>
                        <button type="submit" class="btn btn-success">
                            <i class="fa fa-save"></i>
                            Salvar
                        </button>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">Campos principais</h3>
                    </div>
                    <div class="panel-body">


                        {% for field in hidden_fields %}
                            {{ field }}
                        {% endfor %}


                        {% for item in default_fields %}
                            <div class="form-group">

                                <label for="{{ item.form_field.id_for_label }}">{{ item.form_field.label_tag }}</label>

                                {{ item.form_field }}


                                {% if item.form_field.help_text %}
                                    <br/>
                                    <small class="title">
                                        <strong>Instrução:</strong> {{ item.form_field.help_text|safe }}
                                    </small>
                                {% endif %}

                                {% if item.form_field.errors %}
                                    <br>
                                    <br>
                                    <div class="alert alert-danger alert-dismissable col-md-offset-1">
                                        style="width: 80%">
                                        <button type="button" class="close"
                                                data-dismiss="alert"
                                                aria-hidden="true">×
                                        </button>
                                        {{ item.form_field.errors }}
                                    </div>
                                {% endif %}

                            </div>
                        {% endfor %}

                        <hr/>

                        <input class="btn btn-primary" type="submit"
                               value="Salvar"/>
                        <a class="btn btn-danger" role="button"
                           href="{% url 'subscription:subscription-list' event.pk %}">Cancelar</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="buttonbar bottom">
                    <div class="float-right">
                        <a href="{% url 'subscription:subscription-list' event.pk %}"
                           class="btn btn-danger">
                            <i class="fa fa-close"></i>
                            Cancelar
                        </a>

                        <button type="submit" class="btn btn-success">
                            <i class="fa fa-save"></i>
                            Salvar
                        </button>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>

    </form>

{% endblock %}
