{% extends "gatheros_front/base.html" %}
{% load i18n static %}
{% load subscription_tags %}

{% block extrascript %}
    <script type="text/javascript">
        function configure_input(field_name) {
            var input = document.getElementById('search_input');
            var size;
            switch (field_name) {
                case 'code':
                    size = 10;
                    break;
                case 'name':
                default:
                    size = 60;
            }

            input.setAttribute('size', size);
            input.focus()
        }

        document.addEventListener('DOMContentLoaded', function() {
            configure_input('{{ search_by }}');
        }, false);
    </script>
{% endblock %}

{% block content %}
    <div style="padding:10px">
        <a href="{% url 'gatheros_subscription:subscription-list' event.pk %}">Voltar</a>
    </div>
    <hr/>
    <h1>{{ event.name }}</h1>
    <div style="margin-bottom:10px;padding: 10px;background-color: #DDDDDD;text-align: center;"></div>

    <h2>Credenciamento</h2>
    <br />

    <form method="post" action="">{% csrf_token %}
        <table width="40%" border="0" cellspacing="10" cellpadding="5">
            <tr>
                <th style="text-align: right" width="20%">Procurar por:</th>
                <td>
                    <input {% if search_by == 'name' %}checked{% endif %} type="radio" name="search_by" id="search_by_name" value="name" onclick="window.location.href=window.location.pathname" />
                    <label for="search_by_name">Nome</label>
                    &nbsp; &nbsp; &nbsp;
                    <input {% if search_by == 'code' %}checked{% endif %} type="radio" name="search_by" id="search_by_code" value="code" onclick="window.location.href=window.location.pathname+'?search_by=code'" />
                    <label for="search_by_code">Código</label>
                </td>
            </tr>
            <tr>
                <th style="text-align: right">
                    <label for="search_by_name_input">Informe o nome:</label>
                </th>
                <td>
                    <input required type="search" name="value" value="" id="search_input" size="60" />
                    <button type="submit">Buscar</button>
                </td>
            </tr>
        </table>
    </form>

    {% if search_by == 'code' and result %}
    <h2>Resultado por "Código"</h2>
    <br />

    <table border="0" width="50%" cellpadding="10" cellspacing="1">
        <tr>
            <td width="1%" style="vertical-align:top;font-weight: bold">
                {% if result.person.avatar %}
                    <img src="{{ result.person.avatar.url }}" width="240px" />
                {% else %}
                    <!--suppress CheckImageSize -->
                    <img src="/media/default_avatar.png" width="240px" />
                {% endif %}
            </td>
            <td style="padding: 0">
            <table border="0" width="100%" cellpadding="10" cellspacing="0">
                <tr>
                    <th width="26%" style="text-align: right;vertical-align: top">
                        Pessoa
                    </th>
                    <td style="vertical-align: top">

                    </td>
                </tr>
                <tr>
                    <th width="26%" style="text-align: right;vertical-align: top">
                        Perfil
                    </th>
                    <td style="vertical-align: top">
                        &#10004;
                    </td>
                </tr>
                <tr>
                    <th width="26%" style="text-align: right;vertical-align: top">
                        UUID
                    </th>
                    <td style="vertical-align: top">

                    </td>
                </tr>
                <tr>
                    <th width="26%" style="text-align: right;vertical-align: top">
                        Lote
                    </th>
                    <td style="vertical-align: top">

                    </td>
                </tr>
                <tr>
                    <th width="26%" style="text-align: right;vertical-align: top">
                        Código de Inscrição
                    </th>
                    <td style="vertical-align: top">

                    </td>
                </tr>
                <tr>
                    <th width="20%" style="text-align: right;vertical-align: top">
                        Número de Inscrição
                    </th>
                    <td style="vertical-align: top">

                    </td>
                </tr>
                <tr>
                    <th width="20%" style="text-align: right;vertical-align: top">
                        Cadastrado em
                    </th>
                    <td style="vertical-align: top">

                    </td>
                </tr>
                <tr>
                    <th width="20%" style="text-align: right;vertical-align: top">
                        Cadastrado por
                    </th>
                    <td style="vertical-align: top">

                    </td>
                </tr>
            </table>
            </td>
        </tr>
    </table>
    {% endif %}

    {% if search_by == 'name' %}
    <h2>Resultado por "Nome"</h2>
    <br />

    <table width="80%" style="background: #DDD">
        <tr>
            <th width="4%" style="border:1px solid #fff;padding:10px"># ID</th>
            <th style="text-align: left;border:1px solid #fff;padding:10px">
                Nome do Participante
            </th>
            <th width="8%" style="text-align: left;border:1px solid #fff;padding:10px">
                Lote
            </th>
            <th width="8%" style="text-align: left;border:1px solid #fff;padding:10px">
                Cód. Inscrição
            </th>
            <th width="13%" style="text-align: left;border:1px solid #fff;padding:10px">
                Data Inscrição
            </th>
            <th width="2%" style="border:1px solid #fff;padding:10px">Perfil</th>
            <th width="8%" style="border:1px solid #fff;padding:10px"></th>
        </tr>
        <tr>
            <td style="text-align:center;background: #FFF;padding:10px;margin-bottom: 3px">
                1
            </td>
            <td style="background: #FFF;padding:10px;margin-bottom: 3px">
                <a href="#">
                    Nome
                </a>
            </td>
            <td style="text-align:center;background: #FFF;padding:10px;margin-bottom: 3px">
                Lote 1
            </td>
            <td style="text-align:center;background: #FFF;padding:10px;margin-bottom: 3px">
                Código
            </td>
            <td style="background: #FFF;padding:10px;margin-bottom: 3px">
                created
            </td>
            <td style="text-align:center;background: #FFF;padding:10px;margin-bottom: 3px">
                {% if item.person.user_id %}
                    &#10004;
                {% endif %}
            </td>
            <td style="text-align:center;background: #FFF;padding:10px;margin-bottom: 3px">

            </td>
        </tr>
    </table>
    {% endif %}

{% endblock %}
